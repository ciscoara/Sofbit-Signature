<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sofbit – Email Signature Builder (Plain HTML)</title>
  <style>
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif; background: #f5f7fb; color: #0f172a; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    .container { max-width: 980px; margin: 0 auto; padding: 20px; }
    h1 { margin: 0 0 16px; font-size: 20px; }
    .panel { background: #fff; border-radius: 16px; padding: 16px; box-shadow: 0 8px 30px rgba(0,0,0,.06); border: 1px solid rgba(0,0,0,.08); }
    .panel + .panel { margin-top: 16px; }
    label { display: block; font-size: 12px; color: #334155; margin: 6px 0 6px; }
    input, textarea, button { width: 100%; border: 1px solid rgba(0,0,0,.15); border-radius: 10px; padding: 10px 12px; font-size: 14px; background: #fff; }
    textarea { resize: vertical; }
    .row { display: grid; grid-template-columns: 1fr; gap: 12px; }
    @media(min-width: 720px){ .row.two { grid-template-columns: 1fr 1fr; } }
    .btn { display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; border:1px solid rgba(0,0,0,.12); background:#0ea5e9; color:#fff; cursor:pointer; }
    .btn:disabled { opacity:.6; cursor: not-allowed; }

    /* Live preview visuals */
    .sig-card { background: #ffffff; border-radius: 16px; overflow: hidden; border: 1px solid rgba(0,0,0,.06); }
    .sig-grid { display: grid; grid-template-columns: 6px 1fr; }
    .accent { background: var(--accentColor, #00b4d8); }
    .inner { padding: 18px 20px; }
    .name { font-weight: 700; font-size: 18px; margin: 0; color: #0f172a; }
    .role { font-weight: 600; font-size: 14px; margin: 2px 0 10px; color: #0ea5e9; }
    .meta { font-size: 13px; margin: 0; color: #334155; }
    .meta a { color: #2563eb; text-decoration: none; }
    .meta a:hover { text-decoration: underline; }
    .divider { height: 1px; background: linear-gradient(90deg, rgba(15,23,42,.08), rgba(15,23,42,.02)); margin: 14px 0 0; border: 0; }
    .footer { font-size: 11px; color: #475569; line-height: 1.45; background: #fbfdff; padding: 14px 20px 18px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Sofbit – Email Signature Builder</h1>

    <!-- Builder -->
    <div class="panel">
      <div class="row two">
        <div>
          <label for="name">Full name</label>
          <input id="name" type="text" value="Cisco Aravena" />
        </div>
        <div>
          <label for="role">Position / Title</label>
          <input id="role" type="text" value="Founder" />
        </div>
      </div>
      <div class="row two">
        <div>
          <label for="website">Website URL</label>
          <input id="website" type="url" value="https://sofbit.cl" />
        </div>
        <div>
          <label for="phone">Phone</label>
          <input id="phone" type="text" value="+1 (801) 830-5536" />
        </div>
      </div>
      <div class="row two">
        <div>
          <label for="logo">Logo URL</label>
          <input id="logo" type="url" value="https://sofbit.cl/assets/sofbitavatar.png" />
        </div>
        <div>
          <label for="accent">Accent Color</label>
          <input id="accent" type="color" value="#00b4d8" />
        </div>
      </div>
      <div class="row">
        <div>
          <label for="footer">Footer notice</label>
          <textarea id="footer" rows="4">Privacy &amp; Confidentiality Notice: This email, including any attachments, may contain confidential and/or proprietary information intended solely for the recipient. If you are not the intended recipient, please notify the sender and delete this message. Any unauthorized review, use, disclosure, or distribution is prohibited. Sofbit may process contact data solely for legitimate business communications and will not sell personal data. For requests related to your data, please contact privacy@sofbit.cl.</textarea>
        </div>
      </div>
      <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
        <button class="btn" id="copyBtn">Copy HTML (Quick Save)</button>
      </div>
    </div>

    <!-- Live Preview -->
    <div class="panel">
      <div id="preview" class="sig-card" style="--accentColor:#00b4d8;">
        <div class="sig-grid">
          <div class="accent"></div>
          <div class="inner">
            <table role="presentation" style="border-collapse:collapse;width:100%;">
              <tr>
                <td style="vertical-align:middle;width:120px;padding-right:14px;">
                  <img id="p-logo" src="https://sofbit.cl/assets/sofbitavatar.png" alt="Sofbit Logo" width="120" style="display:block;border-radius:10px;height:auto;" />
                </td>
                <td style="vertical-align:middle;">
                  <p class="name" id="p-name">Cisco Aravena</p>
                  <p class="role" id="p-role">Founder</p>
                  <p class="meta">
                    <a id="p-website" href="https://sofbit.cl" target="_blank" rel="noopener">sofbit.cl</a><br />
                    <span id="p-phone">+1 (801) 830-5536</span>
                  </p>
                </td>
              </tr>
            </table>
            <hr class="divider" />
            <div class="footer" id="p-footer">
              <strong>Privacy &amp; Confidentiality Notice:</strong> Privacy &amp; Confidentiality Notice: This email, including any attachments, may contain confidential and/or proprietary information intended solely for the recipient. If you are not the intended recipient, please notify the sender and delete this message. Any unauthorized review, use, disclosure, or distribution is prohibited. Sofbit may process contact data solely for legitimate business communications and will not sell personal data. For requests related to your data, please contact privacy@sofbit.cl.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const els = {
      name: document.getElementById('name'),
      role: document.getElementById('role'),
      website: document.getElementById('website'),
      phone: document.getElementById('phone'),
      logo: document.getElementById('logo'),
      accent: document.getElementById('accent'),
      footer: document.getElementById('footer'),
      copyBtn: document.getElementById('copyBtn'),
    };

    const pv = {
      logo: document.getElementById('p-logo'),
      name: document.getElementById('p-name'),
      role: document.getElementById('p-role'),
      website: document.getElementById('p-website'),
      phone: document.getElementById('p-phone'),
      footer: document.getElementById('p-footer'),
      preview: document.getElementById('preview'),
    };

    const state = {
      name: els.name.value,
      role: els.role.value,
      website: els.website.value,
      phone: els.phone.value,
      logo: els.logo.value,
      accent: els.accent.value,
      footer: els.footer.value,
    };

    function escapeHtml(str){
      return str.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'",'&#39;');
    }

    function websiteLabel(url){
      try { return url.replace(/^https?:\/\//,'').replace(/\/$/,''); } catch { return url; }
    }

    function updatePreview(){
      pv.logo.src = state.logo;
      pv.name.textContent = state.name;
      pv.role.textContent = state.role;
      pv.website.href = state.website;
      pv.website.textContent = websiteLabel(state.website);
      pv.phone.textContent = state.phone;
      pv.footer.innerHTML = '<strong>Privacy &amp; Confidentiality Notice:</strong> ' + escapeHtml(state.footer);
      pv.preview.style.setProperty('--accentColor', state.accent);
      pv.preview.querySelector('.accent').style.background = state.accent;
    }

    function buildExportHtml(){
      const safe = {
        name: escapeHtml(state.name),
        role: escapeHtml(state.role),
        website: escapeHtml(state.website),
        websiteLabel: escapeHtml(websiteLabel(state.website)),
        phone: escapeHtml(state.phone),
        logo: escapeHtml(state.logo),
        accent: escapeHtml(state.accent),
        footer: escapeHtml(state.footer),
      };

      return (
        '<table role="presentation" cellpadding="0" cellspacing="0" style="border-collapse:collapse;margin:0;padding:0;width:100%;max-width:560px;">' +
        '<tr>' +
        '<td style="width:6px;background:' + safe.accent + ';">&nbsp;</td>' +
        '<td style="background:#ffffff;border:1px solid rgba(0,0,0,.06);border-left:0;border-radius:0 16px 16px 0;box-shadow:0 8px 30px rgba(0,0,0,.08);padding:18px 20px;">' +
        '<table role="presentation" style="border-collapse:collapse;width:100%;">' +
        '<tr>' +
        '<td style="vertical-align:middle;width:120px;padding-right:14px;">' +
        '<img src="' + safe.logo + '" alt="Logo" width="120" style="display:block;border-radius:10px;height:auto;"/>' +
        '</td>' +
        '<td style="vertical-align:middle;">' +
        '<p style="font-weight:700;font-size:18px;color:#0f172a;margin:0;">' + safe.name + '</p>' +
        '<p style="font-weight:600;font-size:14px;color:#0ea5e9;margin:2px 0 10px;">' + safe.role + '</p>' +
        '<p style="font-size:13px;color:#334155;margin:0;">' +
        '<a href="' + safe.website + '" target="_blank" rel="noopener" style="color:#2563eb;text-decoration:none;">' + safe.websiteLabel + '</a><br/>' +
        '<span>' + safe.phone + '</span>' +
        '</p>' +
        '</td>' +
        '</tr>' +
        '</table>' +
        '<hr style="height:1px;margin:14px 0 0;background:linear-gradient(90deg, rgba(15,23,42,.08), rgba(15,23,42,.02));border:0;"/>' +
        '<div style="font-size:11px;color:#475569;line-height:1.45;padding:14px 20px 18px;background:#fbfdff;">' +
        '<strong>Privacy &amp; Confidentiality Notice:</strong> ' + safe.footer +
        '</div>' +
        '</td>' +
        '</tr>' +
        '</table>'
      );
    }

    function copyHtml(){
      const html = buildExportHtml();
      if (navigator.clipboard && window.ClipboardItem) {
        const blob = new Blob([html], { type: 'text/html' });
        const item = new ClipboardItem({ 'text/html': blob });
        navigator.clipboard.write([item]).then(() => alert('Signature HTML copied!'), () => fallback());
      } else { fallback(); }
      function fallback(){ navigator.clipboard.writeText(html).then(() => alert('Signature HTML copied as plain text!'), () => alert('Could not copy.')); }
    }

    Object.keys(state).forEach(k => { els[k].addEventListener('input', () => { state[k] = els[k].value; updatePreview(); }); });
    els.copyBtn.addEventListener('click', copyHtml);

    updatePreview();
  </script>
</body>
</html>
